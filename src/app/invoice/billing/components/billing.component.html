<div class="billing-actions">

  <!-- Top row -->
  <div class="top-row">
    <button cButton color="info" class="text-white fw-bold" (click)="openNewBillingModal()">
      Add GST Bill
    </button>

    <c-input-group class="billing-input">
      <input aria-label="Search billing name" cFormControl placeholder="Search billing name"
        [formControl]="searchTerm" />
      <span role="button" cInputGroupText class="fs-5" (click)="resetSearch()">&times;</span>
    </c-input-group>
  </div>

  <div class="bottom-row">
    <c-input-group class="year-picker">
      <span cInputGroupText (click)="dp.toggle()">
        <svg cIcon name="cil-calendar" title="Select Year" class="mx-1" style="cursor:pointer;"></svg>
        &nbsp;Select Year
      </span>
      <input type="text" cFormControl bsDatepicker [bsConfig]="bsConfig" #dp="bsDatepicker" [(ngModel)]="currentYear"
        (bsValueChange)="onYearChange($event)" readonly />
    </c-input-group>
  </div>

</div>




<c-modal [visible]="showModal" backdrop="static" size="xl" alignment="center">
  <c-modal-header>
    <h5 class="modal-title">{{modalTitle}}</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="closeModal()">
    </button>
  </c-modal-header>

  <c-modal-body>
    <ng-container #modalHost></ng-container>
  </c-modal-body>
</c-modal>

<c-modal [visible]="showProductDetailsModal" backdrop="static" size="lg" alignment="center">
  <c-modal-header>
    <h5 class="modal-title">Order Details</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="closeOrderDetailsModal()"></button>
  </c-modal-header>
  <c-modal-body>
    <ng-container #modalHostOrderDetails></ng-container>
  </c-modal-body>
</c-modal>

<div *ngIf="paginatedBillingList.length" class="table-responsive">
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Sr No</th>
        <th>Billing Number</th>
        <th>Customer Name</th>
        <th>Product Details</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let billing of paginatedBillingList; let i = index">
        <th scope="row">{{ i + 1 }}</th>
        <td title="{{ billing?.billNumber }}">{{ billing.billNumber }}</td>
        <td title="{{ billing?.customerInfo?.name }}">{{ billing?.customerInfo?.name }}</td>
        <td title="View products details">
          <button cButton color="info" class="text-white button" (click)="onProductDetails(billing)">
            <svg cIcon name="cil-pencil" title="Edit billing details" class="mx-1"></svg>Product Details</button>
        </td>

        <td>
          <button cButton color="primary" class="text-white button" (click)="printBill(billing)"> <svg cIcon
              name="cil-pencil" title="Print bill" class="mx-1 "></svg>Print</button>
          <button cButton color="warning" class="text-white button" (click)="editBilling(billing)"> <svg cIcon
              name="cil-pencil" title="Edit billing details" class="mx-1 "></svg>Edit</button>
          <button cButton color="danger" class="text-white button" (click)="deleteBilling(billing)"> <svg cIcon
              name="cil-trash" title="Delete billing details" class="mx-1"></svg>Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ul *ngIf="paginatedBillingList.length" class="pagination justify-content-center mt-3">

  <li class="page-item" [class.disabled]="currentPage === 1">
    <button class="page-link" (click)="onPageChange(currentPage - 1)">Prev</button>
  </li>

  <li *ngIf="visiblePages[0] > 1" class="page-item disabled">
    <span class="page-link">...</span>
  </li>

  <li class="page-item" *ngFor="let page of visiblePages" [class.active]="currentPage === page">
    <button class="page-link" (click)="onPageChange(page)">{{ page }}</button>
  </li>

  <li *ngIf="visiblePages[visiblePages.length - 1] < totalPages" class="page-item disabled">
    <span class="page-link">...</span>
  </li>

  <li class="page-item" [class.disabled]="currentPage === totalPages">
    <button class="page-link" (click)="onPageChange(currentPage + 1)">Next</button>
  </li>

</ul>


<app-confirmation #confirmModal></app-confirmation>