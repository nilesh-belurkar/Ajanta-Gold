<c-row class="g-4">
  <c-col sm="6" xl="3">
    <c-widget-stat-a [title]="'New Bills  (30 days)'" color="primary">
      <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        <span>{{ invoicesThisMonthCount }}</span>
        <span class="fw-normal" style="font-size: 12px;">
          (84.7% <svg cIcon name="cilArrowTop" size="sm"></svg>)
        </span>
      </ng-template>
      <ng-template cTemplateId="widgetChartTemplate">
        <c-chart  class="mt-3" height="70" type="line" />
      </ng-template>
    </c-widget-stat-a>
  </c-col>

  <c-col sm="6" xl="3">
    <c-widget-stat-a [title]="'Total revenue this month'" color="danger">
      <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        <span>â‚¹ {{ revenueThisMonth | number }}</span>
        <span class="fw-normal" style="font-size: 12px;">
          (-23.6% <svg cIcon name="cilArrowBottom" size="sm"></svg>)
        </span>
      </ng-template>
      <ng-template cTemplateId="widgetChartTemplate">
        <c-chart  class="mt-3 mx-3" height="70" type="bar" />
      </ng-template>
    </c-widget-stat-a>
  </c-col>
  <c-col sm="6" xl="3">
    <c-widget-stat-a color="warning" [title]="'New Customers (7 days)'">
      <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        {{ newCustomersCount }}
        <span class="fw-normal" style="font-size: 12px;">
          (-12.4% <svg cIcon name="cilArrowBottom" size="sm"></svg>)
        </span>
      </ng-template>
      <ng-template cTemplateId="widgetChartTemplate">
        <c-chart class="mt-3 mx-3" height="70" [type]="'line'" />
      </ng-template>
    </c-widget-stat-a>
  </c-col>
  <c-col sm="6" xl="3">
    <c-widget-stat-a [title]="'New Products (7 days)'" color="info">
      <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        <span>{{ newProductsCount }}</span>
        <span class="fw-normal" style="font-size: 12px;">
          (40.9%<svg cIcon name="cilArrowTop" size="sm"></svg>)
        </span>
      </ng-template>
      <ng-template cTemplateId="widgetChartTemplate">
        <c-chart  class="mt-3 mx-3" height="70" type="line" />
      </ng-template>
    </c-widget-stat-a>
  </c-col>


</c-row>

<c-row class="g-4 mb-4 mt-4">

  <c-col xs="12" md="8">
    <div class="p-3" style="background: #fff; border-radius: 8px;">
      <c-chart type="bar" [data]="invoicesBarData" [options]="invoicesBarOptions" height="250"></c-chart>
    </div>
  </c-col>

  <c-col xs="12" md="4">
    <div class="p-3" style="background: #fff; border-radius: 8px;">
      <c-chart type="pie" [data]="topCustomersPieData" [options]="topCustomersPieOptions" height="250"></c-chart>
    </div>
  </c-col>

</c-row>

<c-row class="mt-4">
  <c-col xs>
    <c-card class="mb-4">
      <c-card-body>
        <table [hover]="true" [responsive]="true" [striped]="true" align="middle" cTable class="mb-0 border">
          <thead class="text-nowrap text-truncate">
            <tr>
              <th class="bg-body-tertiary text-center">Sr No</th>
              <th class="bg-body-tertiary">Customer Name</th>
              <th class="bg-body-tertiary text-center">Bill No</th>
              <th class="bg-body-tertiary">Bill Date</th>
              <th class="bg-body-tertiary text-center">Grand Total</th>
            </tr>
          </thead>
          <tbody>
            @for (customer of this.recentInvoices; track customer.$key; let i = $index) {
            <tr>
              <td class="text-center">{{i+1}}</td>
              <td>
                <div>{{ customer.customerInfo.name }}</div>
                <div class="small text-body-secondary text-nowrap">
                  <span>
                    Mobile - +91- {{ customer.customerInfo.mobile }} | GST - {{ customer.customerInfo.GST }}
                  </span>
                </div>
              </td>
              <td class="text-center">
                <span>
                  {{customer.billNumber}}
                </span>
              </td>
              <td>
                {{ customer.billDate | date:'dd-MMM-yyyy' }}

              </td>
              <td class="text-center">
                {{ customer.grandTotal | currency:'INR':'symbol':'1.0-0' }}
              </td>
            </tr>
            }
          </tbody>
        </table>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>